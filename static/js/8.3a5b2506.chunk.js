(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{101:function(e,n,t){"use strict";t.d(n,"a",function(){return f});var i=t(22),o=t(12),r=t(25),s=t(23),a=t(24),c=t(111),l=t(112),u=t.n(l),p=t(86),f=function(e){function n(){var e;return Object(i.a)(this,n),(e=Object(r.a)(this,Object(s.a)(n).call(this))).peer=null,e.pairs={},e.outgoing=[],e._initializePeer(),e}return Object(a.a)(n,e),Object(o.a)(n,[{key:"requestFileInfos",value:function(e){return this._ensureConnection(e,function(e){console.log("sending request "+e.open);var n={type:p.a.Request_File_Infos};e.send(JSON.stringify(n))}),p.b.Info_Got}},{key:"setOutgingFiles",value:function(e){var n=this;if(e)for(var t=function(t){var i=e.item(t);n.outgoing.findIndex(function(e){return e.name==i.name})<0&&n.outgoing.push({name:i.name,size:i.size,type:i.type})},i=0;i<e.length;i++)t(i)}},{key:"_initializePeer",value:function(){this.peer=new u.a(null,{debug:3,confi:{iceServers:[{url:"stun:stun.services.mozilla.com"},{url:"turn:numb.viagenie.ca",credential:"muazkh",username:"webrtc@live.com"}]}}),this.peer.on("open",this._peerOpen.bind(this)),this.peer.on("connection",this._peerConnection.bind(this)),this.peer.on("disconnected",this._peerDisconnected.bind(this)),this.peer.on("close",this._peerClose.bind(this)),this.peer.on("error",this._peerError.bind(this))}},{key:"_peerOpen",value:function(e){this.emit(p.b.Peer_Opened,e)}},{key:"_peerConnection",value:function(e){var n=this.pairs[e.peer];n&&n.conn&&n.conn.open||(this.pairs[e.peer]={conn:e},console.log("_peerConnection "+e.open),this._initializeConnection(e))}},{key:"_peerDisconnected",value:function(){}},{key:"_peerClose",value:function(){}},{key:"_peerError",value:function(e){console.error("Peer error "+e.type),console.error(e)}},{key:"_ensureConnection",value:function(e,n){var t=this.pairs[e];if(t||(this.pairs[e]={},t=this.pairs[e]),!t.conn||!t.conn.open)return t.conn=this.peer.connect(e),console.log("this.peer.connect"+t.conn.open),void this._initializeConnection(t.conn,n);n&&n(t.conn)}},{key:"_initializeConnection",value:function(e,n){var t=this;e.on("open",function(){console.log("conn opened"),n&&n(e)}),e.on("data",function(n){void 0!==n.byteLength||t._onJSONData(JSON.parse(n),e)}),e.on("error",function(n){t._connError(n,e)}),e.on("close",function(){t._connClose(e)})}},{key:"_connError",value:function(e,n){console.error(e)}},{key:"_connClose",value:function(e){console.error("conn closed")}},{key:"_onJSONData",value:function(e,n){switch(e.type){case p.a.Request_File_Infos:var t={type:p.a.Response_File_INfos,payload:this.outgoing};n.send(JSON.stringify(t));break;case p.a.Response_File_INfos:this.pairs[n.peer].incoming=e.payload,this.emit(p.b.Info_Got,n.peer,e.payload);break;case"":break;default:console.error("Unknown message: "+e)}}}]),n}(c.EventEmitter)},113:function(e,n){function t(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=113},173:function(e,n,t){"use strict";t.r(n);var i=t(22),o=t(12),r=t(25),s=t(23),a=t(24),c=t(0),l=t.n(c),u=t(168),p=t(176),f=t(11),h=t(101),d=t(86),v=function(e){function n(e){var t;return Object(i.a)(this,n),(t=Object(r.a)(this,Object(s.a)(n).call(this,e))).textFieldRef=l.a.createRef(),t.state={progress:0,receiverUrl:""},t.myPeer=null,t}return Object(a.a)(n,e),Object(o.a)(n,[{key:"componentWillMount",value:function(){this.myPeer=new h.a,this.initializeMyPeer()}},{key:"initializeMyPeer",value:function(){var e=this;this.myPeer.on(d.b.Peer_Opened,function(n){console.log(n),e.setState({receiverUrl:"".concat(window.location,"/").concat(n)})})}},{key:"selectFile",value:function(e){var n=e.target.files;this.myPeer.setOutgingFiles(n)}},{key:"oCopy",value:function(e){this.textFieldRef&&this.textFieldRef.value&&(this.textFieldRef.select(),document.execCommand("Copy"),this.setState({snackbarOpen:!0}))}},{key:"render",value:function(){var e=this,n=this.props.classes;return l.a.createElement("div",null,l.a.createElement("input",{id:"button-file",className:n.buttonInput,type:"file",multiple:!0,onChange:this.selectFile.bind(this)}),l.a.createElement("label",{htmlFor:"button-file"},l.a.createElement(u.a,{variant:"contained",component:"span",className:n.button,color:"primary"},"Select Files")),l.a.createElement(p.a,{label:"Receiver Url",placeholder:"Receiver Url",variant:"outlined",margin:"normal",fullWidth:!0,value:this.state.receiverUrl,inputRef:function(n){e.textFieldRef=n}}),l.a.createElement(u.a,{variant:"contained",component:"span",className:n.button,color:"primary",disabled:!this.state.receiverUrl,onClick:this.oCopy.bind(this)},"Copy Receiver Url"))}}]),n}(l.a.Component);n.default=Object(f.a)(function(e){return{button:{margin:e.spacing(1)},buttonInput:{display:"none"}}},{withTheme:!0})(v)},86:function(e,n,t){"use strict";t.d(n,"a",function(){return o}),t.d(n,"b",function(){return r});var i=t(22),o=function e(){Object(i.a)(this,e)};o.Request_File_Infos="request_file_infos",o.Response_File_INfos="response_file_infos";var r=function e(){Object(i.a)(this,e)};r.Peer_Opened="peer_opened",r.Info_Got="info_got"}}]);
//# sourceMappingURL=8.3a5b2506.chunk.js.map