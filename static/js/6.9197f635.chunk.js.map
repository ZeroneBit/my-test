{"version":3,"sources":["../node_modules/peerjs/dist sync","MyFileSharer.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","MyFileSharer","props","_this","Object","D_Test_my_test_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","D_Test_my_test_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","D_Test_my_test_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","state","progress","receiverUrl","textFieldRef","React","createRef","peer","blob","conn","setState","initializeConnection","err","Peer","debug","config","iceServers","url","credential","username","on","peerOpen","bind","peerConnection","peerDisconnected","peerClose","peerError","event","source","target","file","files","Blob","type","initializePeer","value","select","document","execCommand","snackbarOpen","URL","createObjectURL","a","createElement","body","appendChild","style","href","download","click","revokeObjectURL","send","filename","filetype","data","saveData","connOpen","connData","connError","connClose","connect","_this2","classes","react__WEBPACK_IMPORTED_MODULE_5___default","className","buttonInput","onChange","readFile","htmlFor","_material_ui_core__WEBPACK_IMPORTED_MODULE_6__","variant","component","button","color","_material_ui_core__WEBPACK_IMPORTED_MODULE_7__","_material_ui_core__WEBPACK_IMPORTED_MODULE_8__","label","placeholder","margin","fullWidth","inputRef","i","disabled","onClick","oCopy","urlChanged","Component","withStyles","theme","spacing","display","withTheme"],"mappings":"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","file":"static/js/6.9197f635.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 138;","import React from 'react';\r\nimport { Button, LinearProgress, TextField } from '@material-ui/core';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Peer from 'peerjs';\r\n\r\nclass MyFileSharer extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            progress: 0,\r\n            receiverUrl: '',\r\n        };\r\n\r\n        this.textFieldRef = React.createRef();\r\n        this.peer = null;\r\n        this.blob = null;\r\n\r\n        this.conn = null;\r\n    }\r\n\r\n    peerOpen(id){\r\n        this.setState({receiverUrl: id});\r\n    }\r\n    peerConnection(conn){\r\n        this.conn = conn;\r\n        this.initializeConnection();\r\n    }\r\n    peerDisconnected(){}\r\n    peerClose(){}\r\n    peerError(err){}\r\n\r\n    initializePeer(){\r\n        this.peer =  new Peer(null,{\r\n            debug:3,\r\n            config:{\r\n                'iceServers':[\r\n                    {url: 'stun:stun1.l.google.com:19302'},\r\n\t\t\t\t\t{url: 'turn:numb.viagenie.ca', credential: 'muazkh', username: 'webrtc@live.com'}\r\n                ],\r\n            },\r\n        });\r\n\r\n        this.peer.on('open', this.peerOpen.bind(this));\r\n        this.peer.on('connection', this.peerConnection.bind(this));\r\n        this.peer.on('disconnected', this.peerDisconnected.bind(this));\r\n        this.peer.on('close', this.peerClose.bind(this));\r\n        this.peer.on('error', this.peerError.bind(this));\r\n\r\n        return this.peer;\r\n    }\r\n\r\n    readFile(event) {\r\n        let source = event.target;\r\n        let file = source.files[0];\r\n\r\n        this.blob = new Blob(source.files, { type: file.type });\r\n\r\n        this.initializePeer();\r\n    }\r\n\r\n    oCopy(event) {\r\n        if (this.textFieldRef && this.textFieldRef.value) {\r\n            this.textFieldRef.select();\r\n            document.execCommand(\"Copy\");\r\n            this.setState({ snackbarOpen: true });\r\n        }\r\n    }\r\n\r\n    saveData(){\r\n        let url = URL.createObjectURL(this.blob);\r\n        let a = document.createElement(\"a\");\r\n        document.body.appendChild(a);\r\n        a.style=\"display:none\";\r\n        a.href = url;\r\n        a.download=\"aa.jpg\";\r\n        a.click();\r\n        \r\n        URL.revokeObjectURL(url);\r\n    }\r\n\r\n    connOpen(){\r\n        if(this.blob){\r\n            this.conn.send({file: this.blob, filename: 'aa', filetype:'tt'});\r\n        }\r\n    }\r\n    connData(data){\r\n        this.blob = new Blob([data.file], {type:data.filetype});\r\n\r\n        this.saveData();\r\n    }\r\n    connError(err){}\r\n    connClose(){}\r\n\r\n    initializeConnection(){\r\n        this.conn.on('open', this.connOpen.bind(this));\r\n        this.conn.on('data', this.connData.bind(this));\r\n        this.conn.on('error', this.connError.bind(this));\r\n        this.conn.on('close', this.connClose.bind(this));\r\n    }\r\n\r\n    urlChanged(event){\r\n        var id = event.target.value;\r\n\r\n        this.initializePeer();\r\n\r\n        this.conn = this.peer.connect(id);\r\n\r\n        this.initializeConnection();\r\n\r\n    }\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            <div>\r\n                <div>\r\n                    <input\r\n                        id=\"button-file\"\r\n                        className={classes.buttonInput}\r\n                        type=\"file\"\r\n                        onChange={this.readFile.bind(this)}\r\n                    />\r\n                    <label htmlFor=\"button-file\">\r\n                        <Button variant=\"contained\" component=\"span\" className={classes.button} color=\"primary\">\r\n                            Select File\r\n                        </Button>\r\n                    </label>\r\n                </div>\r\n\r\n                <div>\r\n                    <LinearProgress variant=\"determinate\" color=\"primary\" value={this.state.progress}></LinearProgress>\r\n                </div>\r\n\r\n                <div>\r\n                    <TextField\r\n                        label=\"Receiver Url\"\r\n                        placeholder=\"Receiver Url\"\r\n                        variant=\"outlined\"\r\n                        margin=\"normal\"\r\n                        fullWidth\r\n                        value={this.state.receiverUrl}\r\n                        inputRef={i => { this.textFieldRef = i; }}\r\n                    ></TextField>\r\n                    <Button variant=\"contained\" component=\"span\" className={classes.button} \r\n                    color=\"primary\" disabled={!this.state.receiverUrl} onClick={this.oCopy.bind(this)}>\r\n                        Copy Receiver Url\r\n                    </Button>\r\n                </div>\r\n\r\n                <div>\r\n                    <TextField\r\n                        label=\"Input Id\"\r\n                        variant=\"outlined\"\r\n                        margin=\"normal\"\r\n                        fullWidth\r\n                        onChange={this.urlChanged.bind(this)}\r\n                    ></TextField>\r\n                </div>\r\n            </div>);\r\n    }\r\n}\r\n\r\nconst styles = theme => ({\r\n    button: {\r\n        margin: theme.spacing(1),\r\n    },\r\n\r\n    buttonInput: {\r\n        display: 'none',\r\n    },\r\n});\r\n\r\nexport default withStyles(styles, { withTheme: true })(MyFileSharer);"],"sourceRoot":""}